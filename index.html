<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LifeOS Sovereign V85 - Cupertino Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;800&display=swap');
        
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #000; 
            color: #fff; 
            -webkit-font-smoothing: antialiased; 
            overflow: hidden; /* App-like feel */
        }
        
        /* === APPLE-STYLE GLASS === */
        .glass-panel { 
            background: rgba(28, 28, 30, 0.65); 
            backdrop-filter: blur(50px); 
            -webkit-backdrop-filter: blur(50px);
            border: 1px solid rgba(255, 255, 255, 0.08); 
        }
        
        .nav-glass {
            background: rgba(20, 20, 20, 0.8);
            backdrop-filter: blur(40px);
            border-right: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* === CARDS & ANIMATIONS === */
        .bento-card {
            position: relative;
            overflow: hidden;
            border-radius: 1.5rem; /* Apple Rounded */
            transition: all 0.4s cubic-bezier(0.25, 1, 0.5, 1);
            cursor: pointer;
            border: 1px solid rgba(255,255,255,0.05);
        }
        .bento-card:hover { transform: scale(0.98); filter: brightness(1.1); }
        .bento-card img { transition: transform 0.8s ease; }
        .bento-card:hover img { transform: scale(1.05); }

        /* === UTILS === */
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .fade-in { animation: fadeIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } }

        /* === TIMELINE === */
        .timeline-row { display: flex; gap: 1.5rem; position: relative; padding-bottom: 2rem; }
        .timeline-line { position: absolute; left: 63px; top: 20px; bottom: -20px; width: 2px; background: rgba(255,255,255,0.1); }
        .timeline-time { width: 50px; text-align: right; font-family: monospace; font-size: 0.85rem; font-weight: 600; opacity: 0.5; padding-top: 1.5rem; }
        .timeline-dot { position: absolute; left: 58px; top: 28px; width: 12px; height: 12px; border-radius: 50%; border: 2px solid #000; box-shadow: 0 0 10px rgba(255,255,255,0.5); z-index: 10; }
        
        /* COLORS & ACCENTS */
        .accent-blue { color: #0A84FF; } .bg-blue { background: #0A84FF; }
        .accent-green { color: #30D158; } .bg-green { background: #30D158; }
        .accent-orange { color: #FF9F0A; } .bg-orange { background: #FF9F0A; }
        .accent-red { color: #FF453A; } .bg-red { background: #FF453A; }
        .accent-purple { color: #BF5AF2; } .bg-purple { background: #BF5AF2; }

        .live-marker { position: absolute; left: 0; right: 0; display: flex; align-items: center; z-index: 20; pointer-events: none; margin-top: -10px; margin-bottom: 10px; }
        .live-line { flex-grow: 1; height: 1px; background: #FF453A; margin-left: 63px; }
        .live-dot { width: 6px; height: 6px; background: #FF453A; border-radius: 50%; position: absolute; left: 61px; }

        /* TICKER */
        .ticker-wrap { width: 100%; overflow: hidden; white-space: nowrap; background: rgba(0,0,0,0.5); border-bottom: 1px solid rgba(255,255,255,0.1); backdrop-filter: blur(10px); }
        .ticker { display: inline-block; padding-left: 100%; animation: ticker 40s linear infinite; }
        .ticker-item { display: inline-block; padding: 0.8rem 2rem; font-size: 0.75rem; font-weight: 600; letter-spacing: 0.05em; }
        @keyframes ticker { 0% { transform: translate3d(0, 0, 0); } 100% { transform: translate3d(-100%, 0, 0); } }
    </style>
</head>
<body class="h-screen w-screen flex text-sm">

    <nav class="w-20 md:w-64 nav-glass flex flex-col justify-between py-8 px-4 z-50 shrink-0">
        <div>
            <div class="flex items-center gap-3 px-2 mb-10">
                <div class="w-8 h-8 rounded-lg bg-white text-black flex items-center justify-center font-bold text-lg">OS</div>
                <span class="text-lg font-semibold tracking-tight hidden md:block">Sovereign</span>
            </div>
            
            <div class="space-y-2">
                <button onclick="switchView('dashboard')" id="nav-dashboard" class="w-full flex items-center gap-4 p-3 rounded-xl transition-all hover:bg-white/10 active text-white/50 hover:text-white">
                    <i class="fas fa-calendar-alt text-lg w-6 text-center"></i>
                    <span class="font-medium hidden md:block">Planning</span>
                </button>
                <button onclick="switchView('news')" id="nav-news" class="w-full flex items-center gap-4 p-3 rounded-xl transition-all hover:bg-white/10 text-white/50 hover:text-white">
                    <i class="fas fa-newspaper text-lg w-6 text-center"></i>
                    <span class="font-medium hidden md:block">ActualitÃ©s</span>
                </button>
            </div>
        </div>

        <div class="space-y-2">
            <button onclick="openProfile()" class="w-full flex items-center gap-4 p-3 rounded-xl transition-all hover:bg-white/10 text-white/50 hover:text-white">
                <i class="fas fa-user-circle text-lg w-6 text-center"></i>
                <span class="font-medium hidden md:block">Profil</span>
            </button>
        </div>
    </nav>

    <div class="flex-1 relative bg-[#050505] overflow-hidden">
        
        <div class="absolute top-[-20%] right-[-10%] w-[600px] h-[600px] bg-blue-900/20 rounded-full blur-[120px] pointer-events-none"></div>
        <div class="absolute bottom-[-20%] left-[-10%] w-[500px] h-[500px] bg-purple-900/20 rounded-full blur-[120px] pointer-events-none"></div>

        <div id="view-dashboard" class="absolute inset-0 flex flex-col md:flex-row p-4 md:p-8 gap-6 overflow-hidden fade-in">
            
            <aside class="md:w-80 flex flex-col gap-6 shrink-0 overflow-y-auto scrollbar-hide">
                <div class="glass-panel p-6 rounded-[2rem]">
                    <h2 class="text-zinc-400 text-xs font-bold uppercase tracking-wider mb-1" id="hudStatus">Aujourd'hui</h2>
                    <h1 class="text-3xl font-bold mb-4" id="hudDate">Date</h1>
                    <div class="flex items-center gap-3 bg-white/5 p-3 rounded-xl">
                        <span class="text-2xl">ðŸ”¥</span>
                        <div>
                            <p class="text-xs font-bold text-orange-400" id="contextTitle">Standard</p>
                            <p class="text-[10px] text-zinc-500">Mode actuel</p>
                        </div>
                    </div>
                </div>

                <div class="glass-panel p-1 rounded-[2rem]">
                    <textarea id="userInput" class="w-full bg-transparent p-5 text-sm outline-none resize-none placeholder-zinc-600 h-24" placeholder="IA: 'Tennis Ã  18h...'"></textarea>
                    <button onclick="traiterBatch()" class="w-full bg-white text-black font-bold py-3 rounded-[1.5rem] hover:bg-gray-200 transition">Planifier</button>
                </div>

                <div class="glass-panel p-6 rounded-[2rem] flex-1">
                    <p class="text-[10px] font-bold uppercase text-zinc-500 mb-4">Mois en cours</p>
                    <div id="calendar" class="grid grid-cols-7 gap-2 text-center text-xs"></div>
                </div>
            </aside>

            <main class="flex-1 glass-panel rounded-[2.5rem] p-8 overflow-y-auto relative">
                <div class="flex justify-between items-center mb-8">
                    <h3 class="font-bold text-lg">Timeline</h3>
                    <div class="flex gap-4 text-xs font-mono">
                        <span class="text-zinc-500">Objectif: <span id="calTarget" class="text-white">--</span></span>
                        <span class="text-blue-400">Eau: <span id="waterText">0L</span></span>
                    </div>
                </div>
                
                <div id="conflictAlertBox" class="hidden mb-4 p-4 rounded-2xl bg-red-500/10 border border-red-500/20 text-red-200 flex justify-between items-center">
                    <span id="conflictMsg" class="text-xs font-bold">Conflit dÃ©tectÃ©</span>
                    <button onclick="closeAlert()">âœ•</button>
                </div>

                <div id="masterTimeline" class="pb-20"></div>
            </main>
        </div>

        <div id="view-news" class="absolute inset-0 hidden flex flex-col bg-[#000] overflow-hidden fade-in">
            
            <div class="ticker-wrap shrink-0 z-20">
                <div class="ticker">
                    <span class="ticker-item"><span class="accent-green">â–²</span> CAC 40: +0.45%</span>
                    <span class="ticker-item"><span class="accent-red">â–¼</span> NASDAQ: -0.12%</span>
                    <span class="ticker-item"><span class="accent-orange">â‚¿</span> BTC: $64,300</span>
                    <span class="ticker-item text-blue-400">BREAKING: Nvidia dÃ©voile Blackwell B200</span>
                    <span class="ticker-item"><span class="accent-green">â–²</span> EUR/USD: 1.089</span>
                </div>
            </div>

            <div class="flex-1 overflow-y-auto p-6 md:p-10 scrollbar-hide">
                <header class="flex justify-between items-end mb-8 max-w-7xl mx-auto w-full">
                    <div>
                        <h1 class="text-4xl md:text-5xl font-bold tracking-tight mb-2">Ã€ la une</h1>
                        <p class="text-zinc-500 font-medium">L'essentiel ce <span id="newsDate">...</span></p>
                    </div>
                    <div class="hidden md:flex gap-2 bg-white/10 p-1 rounded-full backdrop-blur-md">
                        <button onclick="renderNews('all')" class="px-4 py-1.5 rounded-full text-xs font-bold bg-white text-black shadow-lg">Tout</button>
                        <button onclick="renderNews('tech')" class="px-4 py-1.5 rounded-full text-xs font-bold text-zinc-400 hover:text-white transition">Tech</button>
                        <button onclick="renderNews('eco')" class="px-4 py-1.5 rounded-full text-xs font-bold text-zinc-400 hover:text-white transition">Finance</button>
                        <button onclick="renderNews('geo')" class="px-4 py-1.5 rounded-full text-xs font-bold text-zinc-400 hover:text-white transition">Monde</button>
                    </div>
                </header>

                <div id="news-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-7xl mx-auto w-full pb-20">
                    </div>
            </div>
        </div>

    </div>

    <div id="profileModal" class="hidden fixed inset-0 z-[100] bg-black/80 backdrop-blur-xl flex items-center justify-center p-4">
        <div class="bg-[#1c1c1e] w-full max-w-sm rounded-[2rem] p-8 border border-white/10 text-center relative">
            <button onclick="document.getElementById('profileModal').classList.add('hidden')" class="absolute top-4 right-4 w-8 h-8 bg-white/10 rounded-full text-zinc-400">âœ•</button>
            <h2 class="text-xl font-bold mb-6">Synchronisation</h2>
            <div class="space-y-3">
                <button onclick="copyDataToClipboard()" class="w-full py-4 bg-blue-600 rounded-xl font-bold text-sm hover:bg-blue-500 transition">ðŸ“¤ Copier mes donnÃ©es</button>
                <button onclick="importDataFromClipboard()" class="w-full py-4 bg-white/10 rounded-xl font-bold text-sm hover:bg-white/20 transition">ðŸ“¥ Importer une sauvegarde</button>
            </div>
            <div class="mt-8 border-t border-white/5 pt-6 grid grid-cols-2 gap-3">
                <input type="number" id="inputWeight" placeholder="Poids" class="bg-black/30 p-3 rounded-xl text-center text-white outline-none">
                <button onclick="saveProfile()" class="bg-white/10 p-3 rounded-xl font-bold text-xs">Sauvegarder Profil</button>
            </div>
        </div>
    </div>

    <script>
        // === CORE DATA ===
        let db = JSON.parse(localStorage.getItem('lifeos_v70_db') || "{}");
        let profile = JSON.parse(localStorage.getItem('lifeos_v70_profile') || '{"weight":80,"height":180,"age":30,"sex":"male"}');
        let health = JSON.parse(localStorage.getItem('lifeos_v70_health') || '{"water":0}');
        const now = new Date(); const todayNum = now.getDate(); const monthNames = ["Jan","FÃ©v","Mar","Avr","Mai","Juin","Juil","AoÃ»t","Sep","Oct","Nov","DÃ©c"]; 
        let selectedDay = todayNum;

        // === NEWS DATA (IMAGES + LINKS) ===
        // Images are from Unsplash Source API for realistic placeholders
        const articles = [
            { 
                title: "Nvidia dÃ©voile sa nouvelle puce IA", 
                summary: "La puce Blackwell B200 promet une puissance de calcul exponentielle pour les modÃ¨les LLM.", 
                cat: "tech", tag: "Technologie", 
                src: "TechCrunch", time: "2h",
                img: "https://images.unsplash.com/photo-1620712943543-bcc4688e7485?q=80&w=800&auto=format&fit=crop",
                url: "https://techcrunch.com"
            },
            { 
                title: "La FED maintient ses taux directeurs", 
                summary: "Jerome Powell signale que la baisse des taux attendra que l'inflation soit maÃ®trisÃ©e.", 
                cat: "eco", tag: "Finance", 
                src: "Bloomberg", time: "4h",
                img: "https://images.unsplash.com/photo-1611974765270-ca1258634369?q=80&w=800&auto=format&fit=crop",
                url: "https://www.bloomberg.com"
            },
            { 
                title: "Exploration Spatiale: Mars 2030", 
                summary: "La NASA confirme le calendrier pour la premiÃ¨re mission habitÃ©e vers la planÃ¨te rouge.", 
                cat: "tech", tag: "Espace", 
                src: "Science Daily", time: "5h",
                img: "https://images.unsplash.com/photo-1541873676-a18131494184?q=80&w=800&auto=format&fit=crop",
                url: "https://www.nasa.gov"
            },
            { 
                title: "Tensions diplomatiques en Asie", 
                summary: "De nouvelles manÅ“uvres navales intensifient les relations dans la rÃ©gion Pacifique.", 
                cat: "geo", tag: "Monde", 
                src: "Reuters", time: "6h",
                img: "https://images.unsplash.com/photo-1554232682-b9ef9c92f8de?q=80&w=800&auto=format&fit=crop",
                url: "https://www.reuters.com"
            },
            { 
                title: "Le Bitcoin repasse les 64k$", 
                summary: "L'approbation des nouveaux ETF continue de pousser la cryptomonnaie vers des sommets.", 
                cat: "eco", tag: "Crypto", 
                src: "CoinDesk", time: "30 min",
                img: "https://images.unsplash.com/photo-1518546305927-5a555bb7020d?q=80&w=800&auto=format&fit=crop",
                url: "https://www.coindesk.com"
            },
            { 
                title: "RÃ©volution dans l'Ã©nergie solaire", 
                summary: "Un nouveau matÃ©riau permet d'atteindre 40% d'efficacitÃ© sur les panneaux photovoltaÃ¯ques.", 
                cat: "tech", tag: "Ã‰nergie", 
                src: "Wired", time: "8h",
                img: "https://images.unsplash.com/photo-1509391366360-2e959784a276?q=80&w=800&auto=format&fit=crop",
                url: "https://www.wired.com"
            }
        ];

        // === VIEW SWITCHING ===
        function switchView(view) {
            // Update Nav UI
            document.querySelectorAll('nav button').forEach(b => b.classList.replace('text-white', 'text-white/50'));
            document.querySelectorAll('nav button').forEach(b => b.classList.remove('bg-white/10'));
            const btn = document.getElementById(`nav-${view}`);
            btn.classList.replace('text-white/50', 'text-white');
            btn.classList.add('bg-white/10');

            // Hide/Show containers
            document.getElementById('view-dashboard').classList.add('hidden');
            document.getElementById('view-news').classList.add('hidden');
            document.getElementById(`view-${view}`).classList.remove('hidden');

            if(view === 'news') {
                renderNews('all');
                document.getElementById('newsDate').innerText = new Date().toLocaleDateString('fr-FR', {weekday:'long', day:'numeric', month:'long'});
            }
        }

        // === NEWS RENDERER (APPLE STYLE) ===
        function renderNews(filter) {
            const grid = document.getElementById('news-grid');
            grid.innerHTML = '';
            
            const list = filter === 'all' ? articles : articles.filter(a => a.cat === filter);

            list.forEach((art, idx) => {
                // Feature the first article (span 2 cols) if displaying all
                const isFeatured = (idx === 0 && filter === 'all');
                const spanClass = isFeatured ? 'md:col-span-2 md:row-span-2' : '';
                const heightClass = isFeatured ? 'h-96' : 'h-64';

                const html = `
                <div class="bento-card group ${spanClass} ${heightClass}" onclick="window.open('${art.url}', '_blank')">
                    <img src="${art.img}" class="absolute inset-0 w-full h-full object-cover" alt="${art.title}">
                    <div class="absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent opacity-90"></div>
                    
                    <div class="absolute top-4 left-4">
                         <span class="px-3 py-1 rounded-full bg-white/20 backdrop-blur-md border border-white/10 text-[10px] font-bold uppercase tracking-wider text-white">${art.tag}</span>
                    </div>

                    <div class="absolute bottom-0 left-0 p-6 w-full">
                        <div class="flex items-center gap-2 mb-2 opacity-70 text-xs font-medium">
                            <span>${art.src}</span>
                            <span>â€¢</span>
                            <span>${art.time}</span>
                        </div>
                        <h3 class="${isFeatured ? 'text-3xl' : 'text-xl'} font-bold leading-tight mb-2 text-white group-hover:text-blue-400 transition-colors">${art.title}</h3>
                        ${isFeatured ? `<p class="text-zinc-300 text-sm line-clamp-2 max-w-lg">${art.summary}</p>` : ''}
                    </div>
                </div>
                `;
                grid.innerHTML += html;
            });
        }

        // === DASHBOARD LOGIC (Simplified for V85) ===
        function renderHUD() {
            document.getElementById('hudDate').innerText = now.toLocaleDateString('fr-FR', {day:'numeric', month:'short'});
            document.getElementById('calTarget').innerText = Math.round((10*profile.weight + 6.25*profile.height - 5*profile.age + 5)*1.4) + " kcal";
            
            // Build Timeline
            const tl = document.getElementById('masterTimeline');
            tl.innerHTML = '';
            const tasks = db[selectedDay] || [];
            
            // Sort by time
            tasks.sort((a,b) => parseInt(a.time.replace(':','')) - parseInt(b.time.replace(':','')));

            // Add Items
            let html = '';
            tasks.forEach(t => {
                const isSport = t.fullText.match(/sport|gym|crossfit/i);
                const dotColor = isSport ? 'bg-orange-500' : 'bg-blue-500';
                const borderColor = isSport ? 'border-orange-500' : 'border-blue-500';
                
                html += `
                <div class="timeline-row group">
                    <div class="timeline-time">${t.time}</div>
                    <div class="timeline-line"></div>
                    <div class="timeline-dot" style="border-color:${isSport?'#f97316':'#3b82f6'}"></div>
                    <div class="flex-1 p-4 rounded-2xl bg-white/5 border border-white/5 hover:bg-white/10 transition-all cursor-pointer relative overflow-hidden ${isSport ? 'border-l-4 border-l-orange-500' : 'border-l-4 border-l-blue-500'}">
                        <div class="flex justify-between items-center">
                            <h4 class="font-bold text-lg">${t.shortText}</h4>
                            <button onclick="delTask(${selectedDay}, '${t.time}')" class="opacity-0 group-hover:opacity-100 text-red-400 hover:text-red-300 transition">âœ•</button>
                        </div>
                        <p class="text-xs text-zinc-500 mt-1">${t.fullText}</p>
                    </div>
                </div>`;
            });

            if(tasks.length === 0) html = `<div class="text-center p-10 text-zinc-600">Aucune activitÃ© planifiÃ©e.</div>`;
            tl.innerHTML = html;
            
            // Render Calendar
            const cal = document.getElementById('calendar');
            cal.innerHTML = '';
            const daysInMonth = new Date(now.getFullYear(), now.getMonth()+1, 0).getDate();
            for(let i=1; i<=daysInMonth; i++) {
                const hasTask = db[i] && db[i].length > 0;
                const isSel = i === selectedDay;
                const isTod = i === todayNum;
                let bg = 'bg-transparent text-zinc-500';
                if(isTod) bg = 'text-blue-400 font-bold';
                if(isSel) bg = 'bg-white text-black font-bold shadow-lg shadow-white/20';
                
                cal.innerHTML += `<div onclick="selectDay(${i})" class="aspect-square rounded-lg flex items-center justify-center cursor-pointer transition-all ${bg} ${hasTask && !isSel ? 'border-b-2 border-blue-500' : ''}">${i}</div>`;
            }
        }

        // === LOGIC HELPERS ===
        function selectDay(d) { selectedDay = d; renderHUD(); }
        function parseInput(txt) { 
            const timeMatch = txt.match(/(\d{1,2})[h:](\d{2})?/);
            let time = "09:00";
            if(timeMatch) time = `${timeMatch[1].padStart(2,'0')}:${(timeMatch[2]||'00').padStart(2,'0')}`;
            
            let day = selectedDay;
            if(txt.match(/demain/i)) day = todayNum + 1;
            
            return { day, time, text: txt }; 
        }
        function traiterBatch() {
            const raw = document.getElementById('userInput').value;
            if(!raw) return;
            const p = parseInput(raw);
            if(!db[p.day]) db[p.day] = [];
            db[p.day].push({ time: p.time, shortText: raw.split(' ')[0], fullText: raw });
            save(); document.getElementById('userInput').value = '';
        }
        function delTask(d, t) { db[d] = db[d].filter(x => x.time !== t); save(); }
        function save() { localStorage.setItem('lifeos_v70_db', JSON.stringify(db)); renderHUD(); }
        
        // Profile Sync
        function openProfile() { 
            document.getElementById('profileModal').classList.remove('hidden'); 
            document.getElementById('inputWeight').value = profile.weight;
        }
        function saveProfile() {
            profile.weight = document.getElementById('inputWeight').value;
            localStorage.setItem('lifeos_v70_profile', JSON.stringify(profile));
            document.getElementById('profileModal').classList.add('hidden');
            renderHUD();
        }
        function copyDataToClipboard() { navigator.clipboard.writeText(JSON.stringify({db,profile})).then(()=>alert("CopiÃ©!")); }
        function importDataFromClipboard() {
            const s = prompt("Coller data JSON:");
            if(s) { const d = JSON.parse(s); db = d.db; profile = d.profile; save(); localStorage.setItem('lifeos_v70_profile', JSON.stringify(profile)); location.reload(); }
        }

        // Init
        document.getElementById('nav-dashboard').click(); // Default View
        renderHUD();

        // Music Trigger (Mock)
        document.getElementById('hudStatus').innerText = now.getHours() < 12 ? "Bonjour" : "Bonsoir";

    </script>
</body>
</html>
